datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Profile {
  id           String               @id @default(cuid())
  cuisineType  String?
  appliances   ProfileAppliance[]
}

model Appliance {
  id       String             @id @default(cuid())
  name     String             @unique
  profiles ProfileAppliance[]
}

model ProfileAppliance {
  id          String    @id @default(cuid())
  profile     Profile   @relation(fields: [profileId], references: [id])
  profileId   String
  appliance   Appliance @relation(fields: [applianceId], references: [id])
  applianceId String
}

model Recipe {
  id           String   @id @default(cuid())
  name         String   @unique
  description  String?
  instructions String?
  prepTime     Int?
  cookTime     Int?
  servings     Int?
  difficulty   String?
  kcal         Float?
  protein      Float?
  carbs        Float?
  fat          Float?
  fiber        Float?
  sugar        Float?
  sodium       Float?
  tags         String[]
  category     String?
  menuItems    MenuItem[]
  ingredients  RecipeIngredient[]
}

model Plan {
  id        String     @id @default(cuid())
  startDate DateTime
  endDate   DateTime
  menuItems MenuItem[]
}

model MenuItem {
  id       String  @id @default(cuid())
  plan     Plan    @relation(fields: [planId], references: [id])
  planId   String
  date     DateTime
  mealType String
  recipe   Recipe  @relation(fields: [recipeId], references: [id])
  recipeId String
}

model Ingredient {
  id                String              @id @default(cuid())
  name              String              @unique
  category          String?
  recipeIngredients RecipeIngredient[]
}

model RecipeIngredient {
  id           String     @id @default(cuid())
  recipe       Recipe     @relation(fields: [recipeId], references: [id])
  recipeId     String
  ingredient   Ingredient @relation(fields: [ingredientId], references: [id])
  ingredientId String
  quantity     Float
  unit         String?
}

